<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Tutorial - Create a GUI Element - OS.js Documentation</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="description" content="OS.js -- Tutorial - Create a GUI Element" />
    <meta name="keywords" content="OS.js,Documentation,Client,Server,API,Tutorial,Tutorials,Manual,Manuals" />
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="apple-touch-icon-precomposed" href="/favicon.png" />
    <link rel="author" href="https://plus.google.com/101576798387217383063" />
    <link rel="publisher" href="https://plus.google.com/101576798387217383063" />

    <script type="text/javascript">
      if ( window.location.hostname === 'andersevenrud.github.io' ) {
        window.location = '//os.js.org' + window.location.pathname.replace(/\/OS\.js-v2/, '');
      }
      if ( window.location.hostname === 'os.js.org' && window.location.protocol !== 'https:' ) {
        window.location.protocol = 'https:';
      }
    </script>

    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Source+Sans+Pro" />
    <link rel="stylesheet" type="text/css" href="//cdn.rawgit.com/google/code-prettify/master/styles/sunburst.css" />
    <link href="/stylesheets/codex.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <header>
      <img alt="" src="/images/doc/logo.png" />
      <ul>
        <li><a href="/doc/">Index</a></li>
        <li><a href="/doc/client/">Client API</a></li>
        <li><a href="/doc/server/">Server API</a></li>
        <li><a href="/doc/manuals/">Manuals</a></li>
        <li><a href="/doc/tutorials/">Tutorials</a></li>
      </ul>
    </header>

    <nav>
      <h2>Index</h2>


      <b>Development Tutorials</b>
      <ul>
        <li><a href="/doc/tutorials/create-application.html">Create an Application (setup)</a></li>
        <li><a href="/doc/tutorials/create-application-continued.html">Create an Application (continued)</a></li>
        <li><a href="/doc/tutorials/application-with-server-api.html">Create an Application with server API</a></li>
        <li><a href="/doc/tutorials/iframe-application.html">Create an IFrame Application</a></li>
        <li><a href="/doc/tutorials/create-extension.html">Create an Extension</a></li>
        <li><a href="/doc/tutorials/create-service.html">Create a Service</a></li>
        <li><a href="/doc/tutorials/create-theme.html">Create a Theme</a></li>
        <li><a href="/doc/tutorials/create-panelitem.html">Create a Panel Item</a></li>
        <li><a href="/doc/tutorials/create-handler.html">Create a Handler</a></li>
        <li><a href="/doc/tutorials/create-gui-element.html">Create a GUI Element</a></li>
      </ul>

      <b>Development Other</b>
      <ul>
        <li><a href="/doc/tutorials/using-curl.html">Using cURL</a></li>
        <li><a href="/doc/tutorials/using-vfs.html">Using VFS</a></li>
        <li><a href="/doc/tutorials/using-thirdparty.html">Using third-party libraries</a></li>
        <li><a href="/doc/tutorials/extend-client-api.html">Extend Client API</a></li>
        <li><a href="/doc/tutorials/gui.html">GUI</a></li>
      </ul>


    </nav>


    <content>

<h1>Tutorial: Create a GUI Element</h1>
<div>
  <p>
    In this tutorial we'll make a simple GUI element that supports a user-defined label and color.
  </p>
  <p>
    It will show how to build/render and implement methods for binding and modifying behaviour.
  </p>
  <p>
    If you want to make a GUI element that handles lists (like TreeView, IconView etc.) you'll have to use the "DataView" composition. Look at the actual source for these elements to see how it is done, or come back later when I'm done writing example code for it.
  </p>

  <h2>Create Stylesheet</h2>
  <div class="indent">
    <p>
      Just modify "src/client/stylesheets/gui.css" and "src/client/stylesheets/theme.less" and add your new element styles there.
    </p>
    <pre class="code prettyprint lang-css">// ...

gui-my-element {
  box-sizing : border-box;
  display : block;
}

// ...</pre>
  </div>

  <h2>Create JavaScript</h2>
  <div class="indent">
    <p>
      Create a new javascript file in "src/client/javascript/gui":
    </p>
    <pre class="code prettyprint lang-js">(function(API, Utils, VFS, GUI) {
  'use strict';

  /**
   * Element: 'gui-my-element'
   *
   * In this example we simply create a "label" with a user-defineable color
   *
   * Usage example:
   *
   *  &lt;gui-my-element data-color="#ff0000" data-label="My awesome element" /&gt;
   *
   * @api OSjs.GUI.Elements.gui-my-element
   * @class
   */
  GUI.Elements['gui-my-element'] = (function() {

    // Helpers

    function setColor(el, color) {
      el.style.color = color || '#000000'; // Make sure black is default if no color was given
    }

    function setLabel(el, label) {
      Utils.$empty(el);
      el.appendChild(document.createTextNode(String(label));
    }

    function getColor(el) {
      // First try to get color from CSS, then fall-back to element attribute, or the hard default
      return el.style.color || GUI.Helpers.getProperty(el, 'color') || '#00000';
    }

    // The Element

    return {

      //
      // This is called whenever you do `element.on(evName, fn)`
      //
      bind: function(el, evName, callback, params) {
        // In this case we just pass over all events to the root element (ex: 'click')
        Utils.$bind(el, evName, callback.bind(new GUI.Element(el)), params);
      },

      //
      // This is called whenever you do `element.get(param)`
      //
      get: function(el, param) {
        if ( param === 'color' ) {
          return getColor(el);
        }

        // Or get from element attribute
        return GUI.Helpers.getProperty(el, param);
      },

      //
      // This is called whenever you do `element.set(param, value)`
      //
      set: function(el, param, value) {
        if ( param === 'color' ) {
          setColor(el, value);
        } else if ( param === 'label' ) {
          setLabel(el, value);
        }
      },

      //
      // You can also bypass the internal setting method to have custom attributes applied to the DOM element
      //
      /*
      set: function(el, param, value) {
        if ( param === 'color' ) {
          el.setAttribute('data-color', String(value));
          el.setAttribute('data-custom-attribute', 'Foo'); // Add another one
          setColor(value);

          return true; // bypass
        }

        return false;
      },
      */

      //
      // This is the method called when the Scheme is asking to render your element.
      // `el` is the root element (in this case "gui-my-element")
      //
      build: function(el) {
        var label = el.getAttribute('data-label') || 'My GUI element'; // If no label was set, use default one
        var color = el.getAttribute('data-color');

        setLabel(label);
        setColor(color);
      }
    };

  })();

})(OSjs.API, OSjs.Utils, OSjs.VFS, OSjs.GUI);</pre>
  </div>

  <h2>Add and build</h2>
  <div class="indent">
    <p>
      Add your file to "src/conf/200-compile.json". Then run:
    </p>
    <pre>$ grunt dist-files core</pre>
  </div>

</div>


      <div class="adddshere">
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- https://os.js.org (RESPONSIVE) -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-6145716264521226"
             data-ad-slot="9888011596"
             data-ad-format="auto"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>


    </content>


    <footer>
      <img alt="" src="/images/logo-footer.png" />
      <p>
        OS.js &copy; Anders Evenrud 2011-2016
        <br />
        Hosting by Github
      </p>
    </footer>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46087265-1', 'auto');
      ga('require', 'linkid');
      ga('send', 'pageview');
    </script>


    <script>
      ((window.gitter = {}).chat = {}).options = {
        room: 'os-js/OS.js'
      };
    </script>
    <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>


<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

  </body>
</html>
